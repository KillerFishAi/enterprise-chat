# =============================================================================
# 生产环境环境变量样例（复制为 .env 或 .env.local 后填入真实值）
# =============================================================================

# ---------- 通用（Next 应用 + WebSocket 服务必须一致） ----------
NODE_ENV=production

# PostgreSQL 连接串（必填）
DATABASE_URL=postgresql://用户名:密码@主机:5432/数据库名

# JWT 签名密钥（必填，建议 32+ 位随机字符串，可用 openssl rand -base64 32 生成）
JWT_SECRET=请替换为足够长的随机字符串

# Redis 连接（多实例/实时消息必填）
REDIS_URL=redis://主机:6379

# ---------- Next 应用 (app 容器 / npm start) ----------
# 生产用 HTTPS 时设为 true，否则 Cookie 可能无法持久化
COOKIE_SECURE=false

# ---------- WebSocket 服务 (ws 容器 / node server/ws-server.js) ----------
SOCKET_PORT=3001

# 调用 Next 内部接口（如离线推送）时的 base URL；Docker 内网可用 http://app:3000
APP_URL=http://app:3000

# 内部 API 密钥（app 与 ws 必须一致）：ws 调 /api/internal/* 时携带，app 用于校验
INTERNAL_API_SECRET=请替换为足够长的随机密钥

# ---------- 推送（可选；不配则离线用户不会收到 FCM/APNs 推送） ----------
# FCM Legacy Server Key（推荐先用于验证）或 GOOGLE_APPLICATION_CREDENTIALS 路径
# FCM_SERVER_KEY=你的_FCM_服务密钥

# APNs（iOS），需 .p8 证书路径及 Apple 开发者信息
# APNS_KEY_ID=你的_Key_ID
# APNS_TEAM_ID=你的_Team_ID
# APNS_BUNDLE_ID=你的_App_Bundle_ID
# APNS_KEY_PATH=/path/to/AuthKey_XXXX.p8

# ---------- 前端可访问（浏览器连接用） ----------
# 应用公网地址（可选，用于链接等）
# NEXT_PUBLIC_APP_URL=https://你的域名
# WebSocket 服务地址（生产必填：若 WS 与页面不同端口/域名，需配置；否则前端默认用当前 host + 3001）
# 示例：NEXT_PUBLIC_WS_URL=https://ws.你的域名 或 wss://你的域名
# NEXT_PUBLIC_WS_URL=
